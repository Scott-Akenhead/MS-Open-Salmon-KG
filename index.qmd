---
title: Toward an Open Salmon Knowledge Graph
author:
  - name: Scott A. Akenhead
    orcid: 0000-0003-1218-3118
    corresponding: true
    email: scott@s4s.com
    roles:
      - Concept and Design
      - Admin
      - Software
      - Text
    affiliations:
      - Fisheries and Oceans Canada (retired)
keywords:
  - salmon
  - knowledge graph 
abstract: |
  Goals:  A knowledge graph  for all aspects of salmon science and management. The labels schema (faceted classification) is by and for humans. Attention to using labels in users' interfaces. Rich nodes richly linked. All content from public sources.
plain-language-summary: |
  Earthquake data for the island of La Palma from the September 2021 eruption is found ...
key-points: |
  - A web scraping script was developed to pull data from the Instituto Geogràphico Nacional into a machine-readable form for analysis
  - Earthquake events on La Palma are consistent with the presence of both mantle and crustal reservoirs.
date: last-modified
bibliography: references.bib
citation:
  container-title: A Bunnies Guide to Cosmic String Theory
number-sections: true
---

```{r}
#| include: false
library(tidyverse); library(magrittr)
```

## Introduction

```{r}
eruptions <- c(1492, 1585, 1646, 1677, 1712, 1949, 1971, 2021)
n_eruptions <- length(eruptions)
```

```{r}
#| label: fig-timeline
#| fig-cap: Timeline of recent earthquakes on La Palma
#| fig-alt: An event plot of the years of the last 8 eruptions on La Palma.
#| fig-height: 1.5
#| fig-width: 6
par(mar = c(3, 1, 1, 1) + 0.1)
plot(eruptions, rep(0, n_eruptions), 
  pch = "|", axes = FALSE)
axis(1)
box()
```

```{r}
#| output: false
avg_years_between_eruptions <- mean(diff(eruptions[-n_eruptions]))
avg_years_between_eruptions
```

"Knowledge graph" means a neo4j labelled properties graph DB.

Based on data [@akenhead2021] up to and including 1971, eruptions on La Palma happen every `r round(avg_years_between_eruptions, 1)` years on average.

Studies of the magma systems feeding the volcano, such as @marrero2019, have proposed that there are two main magma reservoirs feeding the Cumbre Vieja volcano; one in the mantle (30-40km depth) which charges and in turn feeds a shallower crustal reservoir (10-20km depth).

Eight eruptions have been recorded since the late 1400s (@fig-timeline).

Data and methods are discussed in @sec-data-methods.

We have to salmon-ize this example: The abundance of returning salmon, $R$, that are children of a preceding abundance of spawners, $S$, has conventionally been treated as a simplistic domed function,

$$
R_t = S_{t-4} e^{\alpha-\beta S_{t-4}}
$$ {#eq-ricker}

where $\alpha$ is initial productivity of a salmon population before the effect, $\beta$, of salmon density reduces survival from spawners to returns. The use of $t-4$ reflect presumption of a four-year life cycle, spawners in 2001 will be returns (to spawn the next generation) in 2005. Using @eq-ricker, rather than the linearized version for ordinary linear regression,

$$
\text{log}(\frac{R_t}{S_{t-4}}) = \alpha - \beta S_{t-4} + \mathit{N}(0,\sigma)
$$

which is just plain wrong for many reasons, including undue weight for cases with imprecise estimates at low abundances of $S$. Oops, somebody pushed the button marked *Rant!*

| Name                | Year |
|---------------------|------|
| Current             | 2021 |
| Teneguía            | 1971 |
| Nambroque           | 1949 |
| El Charco           | 1712 |
| Volcán San Antonio  | 1677 |
| Volcán San Martin   | 1646 |
| Tajuya near El Paso | 1585 |
| Montaña Quemada     | 1492 |

: Recent historic eruptions on La Palma {#tbl-history}

@tbl-history summarises the eruptions recorded since the colonization of the islands by Europeans in the late 1400s.

![Map of La Palma](images/la-palma-map.png){#fig-map}

La Palma is one of the west most islands in the Volcanic Archipelago of the Canary Islands (@fig-map).

{{< embed notebooks/explore-earthquakes.qmd#fig-spatial-plot >}}

@fig-spatial-plot shows the location of recent Earthquakes on La Palma.

## Data & Methods {#sec-data-methods}

## Conclusion

## References {.unnumbered}

::: {#refs}
:::
